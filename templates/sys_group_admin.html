{% extends "admin_base.html" %}
{% load seahub_tags %}

{% block nav_groupadmin_class %}class="cur"{% endblock %}

{% block right_panel %}
<h3>所有小组</h3>
{% if groups %}
<table>
    <tr>
        <th width="30%">名字</th>
        <th width="40%">创建者</th>
        <th width="23%">创建时间</th>
        <th width="7%">操作</th>
    </tr>
    {% for group in groups %}
    <tr>
        <td><a href="{{ SITE_ROOT }}group/{{ group.props.id }}/">{{ group.props.group_name }}</a></td>
        <td>{{ group.props.creator_name }}</td>
        <td>{{ group.props.timestamp|tsstr_sec }}</td>
        <td><button data="{{ SITE_ROOT}}group/{{ group.id }}/?op=delete&src=sysgroupadmin" class="group-remove-btn">删除</button></td>
    </tr>
    {% endfor %}
</table>

<div id="paginator">
    {% if current_page != 1 %}
    <a href="{{ SITE_ROOT }}groupadmin/?page={{ prev_page }}&per_page={{ per_page }}">上一页</a>
    {% endif %}
    {% if page_next %}
    <a href="{{ SITE_ROOT }}groupadmin/?page={{ next_page }}&per_page={{ per_page }}">下一页</a>
    {% endif %}
    <span>每页：</span> 
    {% if per_page == 25 %}
    <span> 25 </span> 
    {% else %}
    <a href="{{ SITE_ROOT }}groupadmin/?per_page=25" class="per-page">25</a>
    {% endif %}
    {% if per_page == 50 %}
    <span> 50 </span> 
    {% else %}
    <a href="{{ SITE_ROOT }}groupadmin/?per_page=50" class="per-page">50</a>
    {% endif %}
    {% if per_page == 100 %}
    <span> 100 </span> 
    {% else %}
    <a href="{{ SITE_ROOT }}groupadmin/?per_page=100" class="per-page">100</a>
    {% endif %}
</div>
{% else %}
<p>暂无</p>
{% endif %}
{% endblock %}

{% block extra_script %}
<script type="text/javascript">
addConfirmTo($('.group-remove-btn'), '确定要删除小组？')
</script>
{% endblock %}
 
