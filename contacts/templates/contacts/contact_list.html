{% extends "myhome_base.html" %}

{% block nav_contacts_class %}class="cur"{% endblock %}
{% block left_panel %}
<h3>操作</h3>
<ul class="with-bg">
    <li><a href="{{ SITE_ROOT }}contacts/add/">添加联系人</a></li>
</ul>
{% endblock %}

{% block right_panel %}

<h3>联系人列表</h3>
<table>
    <tr>
        <th width="38%">邮箱</th>
        <th width="20%">名字</th>
        <th width="32%">备注</th>
        <th width="10%">操作</th>
    </tr>
    {% for contact in contacts %}
    <tr>
        <td>{{ contact.contact_email }}</td>
        <td>{{ contact.contact_name }}</td>
        <td>{{ contact.note }}</td>
        <td>
            <img src="{{ MEDIA_URL }}img/edit-blue-20.png" data="{{ SITE_ROOT }}contacts/edit/?email={{ contact.contact_email }}" class="contact-edit vh" alt="编辑" title="编辑" />
            <img src="{{ MEDIA_URL }}img/delete-20.png" data="{{ SITE_ROOT }}contacts/delete/?email={{ contact.contact_email}}" class="contact-delete vh" alt="删除" title="删除" />        
        </td>
    </tr>
{% endfor %}
</table>
{% endblock %}

{% block extra_script %}
<script type="text/javascript">
$('.contact-edit').click(function() {
        location.href = $(this).attr('data');
});

addConfirmTo($('.contact-delete'));

$("table tr:gt(0)").hover(
    function() {
        $(this).find('img').css('cursor', 'pointer').removeClass('vh');
    },
    function() {
        $(this).find('img').addClass('vh');
    }
);
</script>
{% endblock %}
